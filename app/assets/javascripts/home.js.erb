$(function() {

  var $signupWizard = $('#signupWizard');
  $signupWizard.wizard();

  $('#wizard-prev').on('click', function () {
    $signupWizard.wizard('previous');
    $('#wizard-next').val('Next')
  });
  $('#wizard-next').on('click', function () {
    var item = $signupWizard.wizard('selectedItem');
    if(item.step == 2) {
      if ( $("#step2 .select2-search-choice").length < 2) {
        $("#step2 .notice")[0].style.color = "red";
        return false;
      }
    }
    if (item.step == 3) {
      if ( $("#step3 .select2-search-choice").length < 2) {
        $("#step3 .notice")[0].style.color = "red";
        return false;
      }
    }
    $signupWizard.wizard('next');
  })

  $signupWizard.on('finished', function(e, data) {
    //alert('submitted!!');
    $('#signup_wizard_form').submit()
    $('#signupModal').modal('toggle')
  })
  $signupWizard.on('changed', function(e, data) {
    var item = $signupWizard.wizard('selectedItem');
    if(item.step > 1 || item.step <= 6) {
      $('#wizard-prev').removeAttr('disabled');
    }
    if(item.step == 1) {
      $('#wizard-prev').attr('disabled', 'disabled');
    }
    if(item.step == 6) {
      $('#wizard-next').val('Finish ').on('click', function(e) {
        e.submit()
      });
    }
  })
})

$(function() {
  $('form.new_user').sisyphus();
  $('#offerings').select2({
    placeholder: 'Select an Industry',
    closeOnSelect: false,
    maximumSelectionSize: 5,
  });
  $('#needs').select2({
    placeholder: 'Select an Industry',
    closeOnSelect: false,
    maximumSelectionSize: 5,
  });
})
